
import math

PAD = 0.5 / 2

SCORES = [-4, -3, -2, -1.5, -1, 0]

ZSCORES = {
	45: [1.73, 1.88, 2.04, 2.13, 2.23, 2.44],
	45.5: [1.79, 1.94, 2.11, 2.21, 2.31, 2.52],
    46: [1.85, 2.01, 2.18, 2.28, 2.38, 2.61],
    46.5: [1.91, 2.07, 2.26, 2.36, 2.46, 2.69],
    47: [1.97, 2.14, 2.33, 2.43, 2.54, 2.78],
    47.5: [2.04, 2.21, 2.40, 2.51, 2.62, 2.86],
    48: [2.10, 2.28, 2.48, 2.58, 2.70, 2.95],
    48.5: [2.17, 2.35, 2.55, 2.66, 2.78, 3.04],
    49: [2.23, 2.42, 2.63, 2.75, 2.87, 3.13],
    49.5: [2.31, 2.50, 2.71, 2.83, 2.96, 3.23],
    50: [2.38, 2.58, 2.80, 2.92, 3.05, 3.33],
    50.5: [2.46, 2.66, 2.89, 3.01, 3.14, 3.43],
    51: [2.54, 2.75, 2.98, 3.11, 3.24, 3.54],
    51.5: [2.62, 2.83, 3.08, 3.21, 3.34, 3.65],
    52: [2.70, 2.93, 3.17, 3.31, 3.45, 3.76],
    52.5: [2.79, 3.02, 3.28, 3.41, 3.56, 3.88],
    53: [2.88, 3.12, 3.38, 3.53, 3.68, 4.01],
    53.5: [2.98, 3.22, 3.49, 3.64, 3.80, 4.14],
    54: [3.08, 3.33, 3.61, 3.76, 3.92, 4.27],
    54.5: [3.18, 3.55, 3.85, 4.01, 4.18, 4.55],
    55: [3.29, 3.67, 3.97, 4.14, 4.31, 4.69],
    55.5: [3.39, 3.78, 4.10, 4.26, 4.44, 4.83],
    56: [3.50, 3.90, 4.22, 4.40, 4.58, 4.98],
    56.5: [3.61, 4.02, 4.35, 4.53, 4.71, 5.13],
    57: [3.7, 4, 4.3, 4.5, 4.7, 5.1],
    57.5: [3.8, 4.1, 4.5, 4.7, 4.9, 5.3],
    58: [3.9, 4.3, 4.6, 4.8, 5, 5.4],
    58.5: [4.0, 4.4, 4.7, 4.9, 5.1, 5.6],
    59: [4.2, 4.5, 4.8, 5, 5.3, 5.7],
    59.5: [4.3, 4.6, 5, 5.2, 5.4, 5.9],
    60: [4.4, 4.7, 5.1, 5.3, 5.5, 6],
    60.5: [4.5, 4.8, 5.2, 5.4, 5.6, 6.1],
    61: [4.6, 4.9, 5.3, 5.5, 5.8, 6.3],
    61.5: [4.7, 5, 5.4, 5.7, 5.9, 6.4],
    62: [4.8, 5.1, 5.6, 5.8, 6, 6.5],
    62.5: [4.9, 5.2, 5.7, 5.9, 6.1, 6.7],
    63: [5.0, 5.3, 5.8, 6, 6.2, 6.8],
    63.5: [5.1, 5.4, 5.9, 6.1, 6.4, 6.9],
    64: [5.1, 5.5, 6, 6.2, 6.5, 7],
    64.5: [5.2, 5.6, 6.1, 6.3, 6.6, 7.1],
    65: [5.3, 5.7, 6.2, 6.4, 6.7, 7.3],
    65.5: [5.4, 5.8, 6.3, 6.5, 6.8, 7.4],
    66: [5.5, 5.9, 6.4, 6.7, 6.9, 7.5],
    66.5: [5.6, 6, 6.5, 6.8, 7, 7.6],
    67: [5.7, 6.1, 6.6, 6.9, 7.1, 7.7],
    67.5: [5.8, 6.2, 6.7, 7, 7.2, 7.9],
    68: [5.8, 6.3, 6.8, 7.1, 7.3, 8],
    68.5: [5.9, 6.4, 6.9, 7.2, 7.5, 8.1],
    69: [6.0, 6.5, 7, 7.3, 7.6, 8.2],
    69.5: [6.1, 6.6, 7.1, 7.4, 7.7, 8.3],
    70: [6.2, 6.6, 7.2, 7.5, 7.8, 8.4],
    70.5: [6.3, 6.7, 7.3, 7.6, 7.9, 8.5],
    71: [6.3, 6.8, 7.4, 7.7, 8, 8.6],
    71.5: [6.4, 6.9, 7.5, 7.8, 8.1, 8.8],
    72: [6.5, 7, 7.6, 7.9, 8.2, 8.9],
    72.5: [6.6, 7.1, 7.6, 8, 8.3, 9],
    73: [6.6, 7.2, 7.7, 8, 8.4, 9.1],
    73.5: [6.7, 7.2, 7.8, 8.1, 8.5, 9.2],
    74: [6.8, 7.3, 7.9, 8.2, 8.6, 9.3],
    74.5: [6.9, 7.4, 8, 8.3, 8.7, 9.4],
    75: [6.9, 7.5, 8.1, 8.4, 8.8, 9.5],
    75.5: [7.0, 7.6, 8.2, 8.5, 8.8, 9.6],
    76: [7.1, 7.6, 8.3, 8.6, 8.9, 9.7],
    76.5: [7.2, 7.7, 8.3, 8.7, 9, 9.8],
    77: [7.2, 7.8, 8.4, 8.8, 9.1, 9.9],
    77.5: [7.3, 7.9, 8.5, 8.8, 9.2, 10],
    78: [7.4, 7.9, 8.6, 8.9, 9.3, 10.1],
    78.5: [7.4, 8, 8.7, 9, 9.4, 10.2],
    79: [7.5, 8.1, 8.7, 9.1, 9.5, 10.3],
    79.5: [7.6, 8.2, 8.8, 9.2, 9.5, 10.4],
    80: [7.6, 8.2, 8.9, 9.2, 9.6, 10.4],
    80.5: [7.7, 8.3, 9, 9.3, 9.7, 10.5],
    81: [7.8, 8.4, 9.1, 9.4, 9.8, 10.6],
    81.5: [7.8, 8.5, 9.1, 9.5, 9.9, 10.7],
    82: [7.9, 8.5, 9.2, 9.6, 10, 10.8],
    82.5: [8.0, 8.6, 9.3, 9.7, 10.1, 10.9],
    83: [8.1, 8.7, 9.4, 9.8, 10.2, 11],
    83.5: [8.2, 8.8, 9.5, 9.9, 10.3, 11.2],
    84: [8.3, 8.9, 9.6, 10, 10.4, 11.3],
    84.5: [8.3, 9, 9.7, 10.1, 10.5, 11.4],
    85: [8.4, 9.1, 9.8, 10.2, 10.6, 11.5],
    85.5: [8.5, 9.2, 9.9, 10.3, 10.7, 11.6],
    86: [8.6, 9.3, 10, 10.4, 10.8, 11.7],
    86.5: [8.7, 9.4, 10.1, 10.5, 11, 11.9],
    87: [9.0, 9.6, 10.4, 10.8, 11.2, 12.2],
    87.5: [9.0, 9.7, 10.5, 10.9, 11.3, 12.3],
    88: [9.1, 9.8, 10.6, 11, 11.5, 12.4],
    88.5: [9.2, 9.9, 10.7, 11.1, 11.6, 12.5],
    89: [9.3, 10, 10.8, 11.2, 11.7, 12.6],
    89.5: [9.4, 10.1, 10.9, 11.3, 11.8, 12.8],
    90: [9.5, 10.2, 11, 11.5, 11.9, 12.9],
    90.5: [9.6, 10.3, 11.1, 11.6, 12, 13],
    91: [9.7, 10.4, 11.2, 11.7, 12.1, 13.1],
    91.5: [9.8, 10.5, 11.3, 11.8, 12.2, 13.2],
    92: [9.9, 10.6, 11.4, 11.9, 12.3, 13.4],
    92.5: [9.9, 10.7, 11.5, 12, 12.4, 13.5],
    93: [10.0, 10.8, 11.6, 12.1, 12.6, 13.6],
    93.5: [10.1, 10.9, 11.7, 12.2, 12.7, 13.7],
    94: [10.2, 11, 11.8, 12.3, 12.8, 13.8],
    94.5: [10.3, 11.1, 11.9, 12.4, 12.9, 13.9],
    95: [10.4, 11.1, 12, 12.5, 13, 14.1],
    95.5: [10.4, 11.2, 12.1, 12.6, 13.1, 14.2],
    96: [10.5, 11.3, 12.2, 12.7, 13.2, 14.3],
    96.5: [10.6, 11.4, 12.3, 12.8, 13.3, 14.4],
    97: [10.7, 11.5, 12.4, 12.9, 13.4, 14.6],
    97.5: [10.8, 11.6, 12.5, 13, 13.6, 14.7],
    98: [10.9, 11.7, 12.6, 13.1, 13.7, 14.8],
    98.5: [11.0, 11.8, 12.8, 13.3, 13.8, 14.9],
    99: [11.1, 11.9, 12.9, 13.4, 13.9, 15.1],
    99.5: [11.2, 12, 13, 13.5, 14, 15.2],
    100: [11.2, 12.1, 13.1, 13.6, 14.2, 15.4],
    100.5: [11.3, 12.2, 13.2, 13.7, 14.3, 15.5],
    101: [11.4, 12.3, 13.3, 13.9, 14.4, 15.6],
    101.5: [11.5, 12.4, 13.4, 14, 14.5, 15.8],
    102: [11.6, 12.5, 13.6, 14.1, 14.7, 15.9],
    102.5: [11.7, 12.6, 13.7, 14.2, 14.8, 16.1],
    103: [11.8, 12.8, 13.8, 14.4, 14.9, 16.2],
    103.5: [11.9, 12.9, 13.9, 14.5, 15.1, 16.4],
    104: [12.0, 13, 14, 14.6, 15.2, 16.5],
    104.5: [12.1, 13.1, 14.2, 14.7, 15.4, 16.7],
    105: [12.2, 13.2, 14.3, 14.9, 15.5, 16.8],
    105.5: [12.3, 13.3, 14.4, 15, 15.6, 17],
    106: [12.4, 13.4, 14.5, 15.1, 15.8, 17.2],
    106.5: [12.5, 13.5, 14.7, 15.3, 15.9, 17.3],
    107: [12.6, 13.7, 14.8, 15.4, 16.1, 17.5],
    107.5: [12.7, 13.8, 14.9, 15.6, 16.2, 17.7],
    108: [12.8, 13.9, 15.1, 15.7, 16.4, 17.8],
    108.5: [13.0, 14, 15.2, 15.8, 16.5, 18],
    109: [13.1, 14.1, 15.3, 16, 16.7, 18.2],
    109.5: [13.2, 14.3, 15.5, 16.1, 16.8, 18.3],
    110: [13.3, 14.4, 15.6, 16.3, 17, 18.5],
    110.5: [13.4, 14.5, 15.8, 16.4, 17.1, 18.7],
    111: [13.5, 14.6, 15.9, 16.6, 17.3, 18.9],
    111.5: [13.6, 14.8, 16, 16.7, 17.5, 19.1],
    112: [13.7, 14.9, 16.2, 16.9, 17.6, 19.2],
    112.5: [13.9, 15, 16.3, 17, 17.8, 19.4],
    113: [14.0, 15.2, 16.5, 17.2, 18, 19.6],
    113.5: [14.1, 15.3, 16.6, 17.4, 18.1, 19.8],
    114: [14.2, 15.4, 16.8, 17.5, 18.3, 20],
    114.5: [14.3, 15.6, 16.9, 17.7, 18.5, 20.2],
    115: [14.5, 15.7, 17.1, 17.8, 18.6, 20.4],
    115.5: [14.6, 15.8, 17.2, 18, 18.8, 20.6],
    116: [14.7, 16, 17.4, 18.2, 19, 20.8],
    116.5: [14.8, 16.1, 17.5, 18.3, 19.2, 21],
    117: [15.0, 16.2, 17.7, 18.5, 19.3, 21.2],
    117.5: [15.1, 16.4, 17.9, 18.7, 19.5, 21.4],
    118: [15.2, 16.5, 18, 18.8, 19.7, 21.6],
    118.5: [15.3, 16.7, 18.2, 19, 19.9, 21.8],
    119: [15.4, 16.8, 18.3, 19.1, 20, 22],
    119.5: [15.6, 16.9, 18.5, 19.3, 20.2, 22.2],
    120: [15.7, 17.1, 18.6, 19.5, 20.4, 22.4],
}

def zscore_from(height, weight):
    # unable to calculate z-score for out of range data
    if (height > 120
        or height < 45):
        return None

    # check if there is a perfect height match
    if not height in ZSCORES:
        # if not, find nearest (inferior) int
        major = math.floor(height)
        rest = abs(height - major)
        # then check if we need to round up to 0.5
        if rest < PAD:
            weights = ZSCORES[major]
        else:
            weights = ZSCORES[major + 0.5]
    else:
        weights = ZSCORES[height]

    # we now have a row of weights.
    # loop on each
    for index in range(0, len(weights)):
        # provided weight exist in row.
        # return index in SCORES matching index in row
        if weight == weights[index]:
            return SCORES[index]
        # no match found.
        # once the loop value is above provided weight
        # find out if this value (or previous) is closer
        elif weight < weights[index] and index > 0:
            low = weights[index - 1]
            high = weights[index]
            diff_high = high - weight
            diff_low = weight - low
            if diff_high > diff_low:
                return SCORES[index - 1]
            else:
                return SCORES[index]
    return SCORES[-1]